---
title: 深入区块链技术（二）：P2P 网络
date: 2023-09-27 16:42:31
permalink: /pages/2399cd/
categories: 
  - 深入区块链技术
tags: 
  - 
---

# 探长三生的区块链探险记 🕵️‍♂️🌐

Ahoy, 区块链探险家们！🏴‍☠️ 我是你们的探长三生，今天我们要一起探索区块链的神秘世界，特别是那些隐藏在P2P网络背后的秘密！

## 🚀 P2P网络：区块链的秘密通道

P2P技术，这个神秘的通道，不仅仅出现在流媒体、点对点通讯、文件共享等领域，它还是比特币、以太坊等数字货币的秘密基石。但别急，我们今天要深入探讨的，是区块链技术的P2P技术，也就是比特币和以太坊的P2P网络。

## 🧙‍♂️ P2P网络的四大秘密

1. **网络连接与拓扑结构**
2. **节点发现**
3. **局域网穿透**
4. **节点交互协议**

我们要一起揭开这些秘密的神秘面纱，让我们开始吧！

## 🌌 网络连接与拓扑结构

### 1️⃣ 网络连接

- **比特币**：基于TCP构建，主网默认通信端口为8333。
- **以太坊**：提供UDP和TCP两种连接方式，主网默认TCP通信端口是30303。

### 2️⃣ 拓扑结构

比特币的P2P网络是一个全分布式的拓扑结构，而以太坊的P2P网络则与比特币有所不同，它使用了DHT来定位资源。

## 🗺️ 节点发现

### 1️⃣ 初始节点发现

- **比特币**：通过DNS-seed（DNS种子节点）或硬编码的种子节点。
- **以太坊**：硬编码的种子节点。

### 2️⃣ 启动后节点发现

- **比特币**：通过PING/PONG消息保持节点之间的长连接。
- **以太坊**：使用Kademlia网络，简称KAD网络。

## 🕳️ 局域网穿透

比特币和以太坊使用UPnP协议作为局域网穿透工具，只要局域网中的路由设备支持NAT网关功能、支持UPnP协议，即可将你的区块链节点自动映射到公网上。

## 🔄 节点交互协议

节点交互协议包括请求命令和数据交互命令。比如，比特币和以太坊在节点连接完成后要做的第一件事情是握手操作。

## 🎉 总结

今天我们一起探讨了区块链的P2P网络的秘密，包括网络连接与拓扑结构、节点发现、局域网穿透和节点交互协议。希望这次的探险能让你对区块链P2P网络的拓扑结构以及运行原理有个大体的认知。

感谢你的陪伴，我们下期再见，继续我们的区块链探险之旅！🚀🌕
